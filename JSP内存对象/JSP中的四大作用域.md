# JSP中的四大作用域

## 什么是作用域？

我们在写代码的时候，都会遇到变量的作用域的问题。比如这是一个局部变量，出了它的作用域就无法访问了。对于作用域的概念，最简单的理解就是：

> 在你的地盘，你还算根葱；出了你的地盘，你啥也不是。

我们在定义每一个变量，每一个属性的时候，都会考虑这个变量、属性的作用范围，也就是作用域。我们会根据我们的需求定义最适当作用域的变量和属性。在写Java，C++等代码的时候，这个作用域问题还比较好理解，无非就是**局部变量**、**全局变量**、**静态变量**等区别。而到了JSP开发中，这个作用域概念就和一些新的名词混在一起，变的模糊，难懂了起来。这篇文章将对JSP开发中涉及到的四大作用域进行详细的剖析与总结，还自己一个“明白”。

## JSP中的四大作用域

对于JSP中的四大作用域，主要是指以下四个：

- page作用域
- request作用域
- session作用域
- application作用域

这四个作用域的作用范围，由上到下是一个比一个大。下面就对上述的四个作用域分别进行详细的总结。

### page作用域详解

page直译就是页面的意思，所以page作用域就比较好理解了--page做用于表示只在当前页面有效。当程序运行跑出了当前的页面，你就无法在其它的页面访问当前页面设置的属性值。

我们都知道，JSP最终会被编译成Servlet文件。在Servlet容器中，每个Servlet都只存在一个实例。但是对于page作用域的属性来说，在当前页面设置的属性只在本次访问该页面有效，当你再次访问该页面时，又会重新初始化页面的属性。例如以下代码：

```JavaServletPage
<%
out.print(pageContext.getAttribute("SiteName"));	// 输出null
pageContext.setAttribute("SiteName","果冻想-一个原创技术文章分享网站");
%>
```

当我们在浏览器访问该页面时输出`null`；当我们在重新打开一个该页面时，还会输出`null`，并不会输出“果冻想-一个原创技术文章分享网站”。也就是说，page作用域范围的不会存在线程安全的问题，每一次访问同一个页面，设置的page作用域的属性都是不一样的。

### request作用域详解

request表示一次客户的请求。一次请求的生命周期从客户端发起到服务器接受并响应该请求，或者将该请求`forward`到另一个页面或者Servlet进行处理而结束。在此期间，本次请求的参数，属性都是有效的；一旦客户端刷新浏览器，重新发起请求，则之前的请求参数和属性都将失效。

特别需要注意的是，当我们使用`<jsp:forward ... />`动作将当前请求转向另一个页面或者Servlet的时候，该请求的参数和属性也一并转过去，并不会因为`<jsp:forward ... />` 动作而丢失request的参数和属性。

### session作用域详解

session是一个非常重要的概念。当我们向服务器发送第一个请求开始，只要页面不关闭，或者会话未过期（默认30分钟），或者未调用HttpSession的invalidate()方法，接下来的操作都属于同一次回话的范畴。

### application作用域详解

application作用域是最广的，它代表着整个Web应用的全局变量，对每一个页面，每一个Servlet都是有效的。当我们在application中设置属性时，这个属性在任意的一个页面都是可以访问的。

在application作用域中设置的属性如果不手动调用`removeAttribute`函数进行删除的话，那么application中的属性将永远不会删除，如果Web容器发生重启，此时application范围内的所有属性都将丢失。

## 资料来源

[JSP中的四大作用域](http://www.jellythink.com/archives/1383)